/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x2a07=['_spaceBetweenItems','minHeight','length','addAnnotation','_updateLastItem','_annotationToSidebarItemView','_annotations','view','content','delete','_getTargetTop','getIndex','bottom','_getItemAfter','top','updateHeight','_detachFromContainer','rearrange','_getItemBefore','_lastItem','remove','sidebar.preventScrollOutOfView','listenTo','last','_destroySidebarItemView','context','sidebar-setcontainer-invalid-element','target','_attachToContainer','change:_lastItem','getSidebarItemView','add','_setItemTop','bind','config','_activeAnnotation','destroy','_createSidebarView','_sidebarItemViewToAnnotation','list','change:bottom','Sidebar','_alignBeforeItem','container','_alignAfterItem','sidebar-attachtocontainer-missing-container','setContainer','set','_targetTop','max','isAnimationDisabled','pluginName','element','change:top','init','stopListening','class','locale','clear','appendChild','change:targetRect','define','sidebar.container','isActive','get','targetRect','refresh','_getMaxAvailableTop','_alignToTargetRect','height'];(function(_0x4f7cb2,_0x2a0701){const _0x32202f=function(_0x23ba6b){while(--_0x23ba6b){_0x4f7cb2['push'](_0x4f7cb2['shift']());}};_0x32202f(++_0x2a0701);}(_0x2a07,0x1b2));const _0x3220=function(_0x4f7cb2,_0x2a0701){_0x4f7cb2=_0x4f7cb2-0x0;let _0x32202f=_0x2a07[_0x4f7cb2];return _0x32202f;};import{ContextPlugin as _0x30bcc9}from'ckeditor5/src/core';import _0x36d231 from'./view/sidebarview';import _0x31561d from'./view/sidebaritemview';import{Rect as _0x4fa7f3,CKEditorError as _0x5aa609}from'ckeditor5/src/utils';import{isElement as _0x5c2a45,throttle as _0x5cfa75}from'lodash-es';export default class b extends _0x30bcc9{static get[_0x3220('0x25')](){return _0x3220('0x1b');}constructor(_0x107353){super(_0x107353),this[_0x3220('0x21')](_0x3220('0x5')),this[_0x3220('0x3f')]=this[_0x3220('0x17')](),this['set'](_0x3220('0x1d'),null),this[_0x3220('0x38')]=0x19,this[_0x3220('0x18')]=new Map(),this['_annotationToSidebarItemView']=new Map(),this['context'][_0x3220('0x14')][_0x3220('0x2f')](_0x3220('0x7'),!0x1),this[_0x3220('0x3e')]=null,this[_0x3220('0x15')]=null;}[_0x3220('0x28')](){const _0x490712=this['context'][_0x3220('0x14')][_0x3220('0x32')](_0x3220('0x30'));_0x490712&&this[_0x3220('0x20')](_0x490712);}['setContainer'](_0x324f2f){if(!_0x5c2a45(_0x324f2f))throw new _0x5aa609(_0x3220('0xc'));this[_0x3220('0x1d')]=_0x324f2f;}[_0x3220('0xe')]({viewClass:_0xce7e41='',spaceBetweenItems:_0x1fb45a=0x19}={}){if(!_0x5c2a45(this[_0x3220('0x1d')]))throw new _0x5aa609(_0x3220('0x1f'),this);this[_0x3220('0x1d')][_0x3220('0x2d')](this['view'][_0x3220('0x26')]),this[_0x3220('0x3f')][_0x3220('0x2a')]=_0xce7e41,this[_0x3220('0x38')]=_0x1fb45a;}[_0x3220('0x3')]({removedAnnotation:_0x4e5029,previousAnnotation:_0x4b3ca8,nextAnnotation:_0x3307a7}){const _0x30e497=this[_0x3220('0x10')](_0x4e5029);this[_0x3220('0x3f')][_0x3220('0x19')][_0x3220('0x6')](_0x30e497),this[_0x3220('0xa')](_0x4e5029),_0x4b3ca8&&this[_0x3220('0x36')](this[_0x3220('0x10')](_0x4b3ca8)),_0x3307a7&&this[_0x3220('0x36')](this[_0x3220('0x10')](_0x3307a7)),this['_updateLastItem']();}[_0x3220('0x34')]({blurredAnnotation:_0x5cdeab,activatedAnnotation:_0x19b67e,disableAnimationOnActivatedAnnotation:_0x1a0764}){if(this[_0x3220('0x15')]=_0x19b67e,_0x5cdeab){_0x5cdeab[_0x3220('0x31')]=!0x1;const _0x3e74ee=this[_0x3220('0x10')](_0x5cdeab);_0x3e74ee&&_0x1a0764&&(_0x3e74ee[_0x3220('0x24')]=!0x1);}if(_0x19b67e){const _0x175c7e=this[_0x3220('0x10')](_0x19b67e);_0x175c7e&&(_0x19b67e[_0x3220('0x31')]=!0x0,_0x1a0764&&(_0x175c7e['isAnimationDisabled']=!0x0,_0x175c7e[_0x3220('0x0')]+=0x1),this['_alignToTargetRect'](_0x175c7e));}}[_0x3220('0x2')](_0x377973){this[_0x3220('0x29')](),this[_0x3220('0x3f')][_0x3220('0x26')][_0x3220('0x6')]();for(const _0xc816e0 of _0x377973)this[_0x3220('0xa')](_0xc816e0);this['view'][_0x3220('0x19')][_0x3220('0x2c')](),this['view']['class']='',this[_0x3220('0x5')]=null;}[_0x3220('0x3b')](_0x456072,_0x467621){_0x467621||(_0x467621=_0x456072[_0x3220('0x3f')]);const _0x1f5e25=new _0x31561d(this[_0x3220('0xb')][_0x3220('0x2b')]);this[_0x3220('0x18')][_0x3220('0x21')](_0x1f5e25,_0x456072),this[_0x3220('0x3d')]['set'](_0x456072,_0x1f5e25),_0x1f5e25[_0x3220('0x40')][_0x3220('0x11')](_0x467621),this[_0x3220('0x36')](_0x1f5e25),this['listenTo'](_0x456072[_0x3220('0x3f')],_0x3220('0x2e'),()=>{const _0x421033=this[_0x3220('0x42')](_0x1f5e25);_0x1f5e25[_0x3220('0x22')]!=_0x421033&&(_0x1f5e25[_0x3220('0x22')]=_0x421033,this[_0x3220('0x12')](_0x1f5e25,_0x421033));}),this[_0x3220('0x8')](_0x1f5e25,_0x3220('0x27'),_0x5cfa75(()=>{if(!_0x1f5e25[_0x3220('0x40')][_0x3220('0x3a')])return;const _0x594e79=this[_0x3220('0x4')](_0x1f5e25);if(!_0x594e79)return;const _0x2724dc=this[_0x3220('0x18')][_0x3220('0x32')](_0x594e79),_0x56c4a4=this['_activeAnnotation'];_0x56c4a4&&_0x56c4a4===_0x2724dc?this[_0x3220('0x1e')](_0x594e79,_0x1f5e25):this[_0x3220('0x1c')](_0x1f5e25,_0x594e79);},0xa,{'leading':!0x1})),this[_0x3220('0x8')](_0x1f5e25,_0x3220('0x1a'),_0x5cfa75(()=>{if(!_0x1f5e25['content'][_0x3220('0x3a')])return;const _0x3f44ee=this[_0x3220('0x45')](_0x1f5e25);if(!_0x3f44ee)return;const _0x26d6d1=this[_0x3220('0x18')][_0x3220('0x32')](_0x3f44ee),_0x28d4ce=this[_0x3220('0xb')][_0x3220('0x14')][_0x3220('0x32')](_0x3220('0x7')),_0x5c2cfb=this['_activeAnnotation'];_0x5c2cfb&&_0x5c2cfb===_0x26d6d1&&_0x28d4ce?(this[_0x3220('0x1c')](_0x3f44ee,_0x1f5e25),this[_0x3220('0x1e')](_0x1f5e25,_0x3f44ee)):_0x5c2cfb&&_0x5c2cfb===_0x26d6d1?this['_alignBeforeItem'](_0x3f44ee,_0x1f5e25):this[_0x3220('0x1e')](_0x1f5e25,_0x3f44ee);},0xa,{'leading':!0x1}));const _0x283c35=this[_0x3220('0x4')](_0x1f5e25);if(_0x283c35)this[_0x3220('0x1e')](_0x283c35,_0x1f5e25)||this['_alignToTargetRect'](_0x1f5e25);else this[_0x3220('0x36')](_0x1f5e25);return this['_updateLastItem'](),this[_0x3220('0x3f')]['list'][_0x3220('0x11')](_0x1f5e25),_0x1f5e25;}[_0x3220('0x10')](_0x1a1496){return this[_0x3220('0x3d')][_0x3220('0x32')](_0x1a1496);}['destroy'](){this[_0x3220('0x3f')][_0x3220('0x16')]();}[_0x3220('0xa')](_0x69917){const _0x4b50aa=this['getSidebarItemView'](_0x69917);this[_0x3220('0x29')](_0x4b50aa),this[_0x3220('0x29')](_0x69917['view']),_0x4b50aa[_0x3220('0x16')](),this[_0x3220('0x3d')][_0x3220('0x41')](_0x69917),this[_0x3220('0x18')][_0x3220('0x41')](_0x4b50aa);}[_0x3220('0x17')](){const _0x46fbd2=new _0x36d231(this[_0x3220('0xb')][_0x3220('0x2b')]);return _0x46fbd2['render'](),this['on'](_0x3220('0xf'),(_0x39761d,_0x2127ce,_0x2c0c1f,_0x41d1b6)=>{_0x41d1b6&&_0x46fbd2['unbind'](_0x3220('0x39')),_0x2c0c1f?_0x46fbd2[_0x3220('0x13')](_0x3220('0x39'))['to'](_0x2c0c1f,_0x3220('0x44')):_0x46fbd2[_0x3220('0x39')]=null;}),_0x46fbd2;}[_0x3220('0x3c')](){this['_lastItem']=this[_0x3220('0x10')](this['_annotations'][_0x3220('0x9')]);}[_0x3220('0x4')](_0x17337f){const _0xbc4708=this[_0x3220('0x18')][_0x3220('0x32')](_0x17337f),_0x137844=this[_0x3220('0x3e')][_0x3220('0x32')](this[_0x3220('0x3e')][_0x3220('0x43')](_0xbc4708)-0x1);return _0x137844&&this['getSidebarItemView'](_0x137844);}['_getItemAfter'](_0x3d095d){const _0x32e84e=this[_0x3220('0x18')][_0x3220('0x32')](_0x3d095d),_0x4292b9=this[_0x3220('0x3e')][_0x3220('0x32')](this[_0x3220('0x3e')][_0x3220('0x43')](_0x32e84e)+0x1);return _0x4292b9&&this[_0x3220('0x10')](_0x4292b9);}['_alignBeforeItem'](_0x318bfb,_0x27608e){_0x318bfb[_0x3220('0x1')]();const _0x560500=C(_0x27608e['bottom']+this[_0x3220('0x38')],_0x318bfb[_0x3220('0x0')]);return!!_0x560500&&(this[_0x3220('0x12')](_0x27608e,_0x27608e[_0x3220('0x0')]-_0x560500),!0x0);}['_alignAfterItem'](_0xf7943a,_0x3dfce2){_0xf7943a[_0x3220('0x1')]();const _0x539fea=C(_0xf7943a[_0x3220('0x44')]+this['_spaceBetweenItems'],_0x3dfce2[_0x3220('0x0')]);return!!_0x539fea&&(this[_0x3220('0x12')](_0x3dfce2,_0x3dfce2[_0x3220('0x0')]+_0x539fea,!0x1),!0x0);}[_0x3220('0x36')](_0x131abd){const _0xbc1962=this['_sidebarItemViewToAnnotation'][_0x3220('0x32')](_0x131abd);if(!_0xbc1962||!_0xbc1962[_0x3220('0xd')])return;const _0x72ecc3=this[_0x3220('0x42')](_0x131abd);this[_0x3220('0x12')](_0x131abd,_0x72ecc3);}[_0x3220('0x42')](_0x30fb82){const _0x131b9f=this[_0x3220('0x18')][_0x3220('0x32')](_0x30fb82);if(null===_0x131b9f[_0x3220('0x33')])return 0x0;if(_0x131b9f['target']instanceof _0x4fa7f3)return _0x131b9f[_0x3220('0x33')][_0x3220('0x0')];{const _0x46cdd8=new _0x4fa7f3(this['view'][_0x3220('0x26')])['top'];return _0x131b9f[_0x3220('0x33')][_0x3220('0x0')]-_0x46cdd8;}}[_0x3220('0x12')](_0x1e22d2,_0x31f3ff,_0x5119a5=this[_0x3220('0xb')]['config'][_0x3220('0x32')](_0x3220('0x7'))){_0x5119a5&&(_0x31f3ff=Math['max'](_0x31f3ff,this[_0x3220('0x35')](_0x1e22d2))),_0x1e22d2[_0x3220('0x0')]=_0x31f3ff;}[_0x3220('0x35')](_0x17b881){let _0x14e1c5=this['_getItemBefore'](_0x17b881),_0x4e227d=0x0;for(;_0x14e1c5;)_0x14e1c5[_0x3220('0x1')](),_0x4e227d+=this['_spaceBetweenItems']+_0x14e1c5[_0x3220('0x37')],_0x14e1c5=this[_0x3220('0x4')](_0x14e1c5);return _0x4e227d;}}function C(_0x754e11,_0x19ea72){return Math[_0x3220('0x23')](_0x754e11-_0x19ea72,0x0);}