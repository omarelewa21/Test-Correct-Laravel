/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x169e=['widesidebar-detach-not-attached','activeAnnotation','off','removeEventListener','refresh','stopListening','_annotations','_destroyEditorAnnotationsIntegration','_editorAnnotations','isAttached','ready','set','_integrateWithEditorAnnotations','setActiveAnnotation','requires','_attachToContainer','EditorAnnotations','hasDomSelection','add','register','_throttledPositioningRefresh','WideSidebar','addEventListener','high','pluginName','container','plugins','resize','widesidebar-attach-already-attached','wideSidebar','_detachFromContainer','_activeAnnotation','change:container','stop','context','uiUpdate','listenTo','remove','editors','refreshPositioning','has','blur','switchTo','getOrderedSelectedAnnotations','get','ck-sidebar--wide','detach','updateTargetRect','attach'];(function(_0x5542e7,_0x169e45){const _0x31236d=function(_0x434294){while(--_0x434294){_0x5542e7['push'](_0x5542e7['shift']());}};_0x31236d(++_0x169e45);}(_0x169e,0x1ca));const _0x3123=function(_0x5542e7,_0x169e45){_0x5542e7=_0x5542e7-0x0;let _0x31236d=_0x169e[_0x5542e7];return _0x31236d;};import{ContextPlugin as _0x20b92f}from'ckeditor5/src/core';import _0x2c81a3 from'./annotationsuis';import _0x6f2571 from'./sidebar';import{CKEditorError as _0x7fcb2c,Collection as _0x4d7e75}from'ckeditor5/src/utils';import{throttle as _0x1c865e}from'lodash-es';export default class i extends _0x20b92f{static get[_0x3123('0x2e')](){return[_0x6f2571,_0x2c81a3];}static get[_0x3123('0x7')](){return _0x3123('0x4');}constructor(_0x37a96b){super(_0x37a96b),this[_0x3123('0x29')]=!0x1,this[_0x3123('0x2b')](_0x3123('0x21'),null),this[_0x3123('0x26')]=null,this[_0x3123('0x28')]=new _0x4d7e75(),this[_0x3123('0x3')]=_0x1c865e(()=>{this[_0x3123('0x26')][_0x3123('0x16')]();},0x190,{'leading':!0x1});}['init'](){const _0xdd4cc9=this[_0x3123('0x11')][_0x3123('0x9')][_0x3123('0x1b')](_0x2c81a3),_0x34d007=this[_0x3123('0x11')][_0x3123('0x9')][_0x3123('0x1b')](_0x6f2571);_0xdd4cc9[_0x3123('0x2')]('wideSidebar',this),_0x34d007[_0x3123('0x8')]&&_0xdd4cc9[_0x3123('0x19')](_0x3123('0xc'));}[_0x3123('0x2d')](_0x21d5ec){if(_0x21d5ec===this[_0x3123('0x21')])return;const _0x511109=this['context'][_0x3123('0x9')]['get'](_0x6f2571);_0x511109[_0x3123('0xe')]=_0x21d5ec;const _0x2ac4cb=this[_0x3123('0x21')];this[_0x3123('0x21')]=_0x21d5ec,_0x511109[_0x3123('0x24')]({'blurredAnnotation':_0x2ac4cb,'activatedAnnotation':this[_0x3123('0x21')]});}[_0x3123('0x1f')](_0x2f4f2b){this['_annotations']=_0x2f4f2b;const _0xbe80cb=this[_0x3123('0x11')]['plugins'][_0x3123('0x1b')]('Sidebar');if(_0xbe80cb[_0x3123('0x26')]=_0x2f4f2b,this[_0x3123('0x29')])throw new _0x7fcb2c(_0x3123('0xb'),this);this[_0x3123('0x29')]=!0x0,this[_0x3123('0x13')](_0xbe80cb,'set:container',()=>{this[_0x3123('0x1d')](),this[_0x3123('0x13')](_0xbe80cb,_0x3123('0xf'),_0x30220b=>{_0x30220b[_0x3123('0x22')](),this['attach'](_0x2f4f2b);});}),_0xbe80cb[_0x3123('0x2f')]({'viewClass':_0x3123('0x1c')});const _0x2490ed=_0x469c10=>{_0x469c10[_0x3123('0x1e')](),_0xbe80cb['addAnnotation'](_0x469c10);};for(const _0x186a58 of _0x2f4f2b)_0x2490ed(_0x186a58);this[_0x3123('0x13')](_0x2f4f2b,_0x3123('0x1'),(_0x34f142,_0x56497c)=>{_0x2490ed(_0x56497c);}),this[_0x3123('0x13')](_0x2f4f2b,_0x3123('0x14'),(_0x2cec4f,_0x50851b,_0x2a4be8)=>{_0xbe80cb['rearrange']({'removedAnnotation':_0x50851b,'previousAnnotation':_0x2f4f2b['get'](_0x2a4be8-0x1),'nextAnnotation':_0x2f4f2b['get'](_0x2a4be8+0x1)}),_0x50851b===this[_0x3123('0x21')]&&this[_0x3123('0x2d')](null);},{'priority':_0x3123('0x6')}),this[_0x3123('0x13')](_0x2f4f2b,'focus',(_0x1446d3,_0x4792ac)=>{this['setActiveAnnotation'](_0x4792ac);}),this[_0x3123('0x13')](_0x2f4f2b,_0x3123('0x18'),()=>{this[_0x3123('0x2d')](null);});const _0x3f4860=this['context'][_0x3123('0x15')]?this[_0x3123('0x11')][_0x3123('0x15')]:new _0x4d7e75([this[_0x3123('0x11')]]);for(const _0x5881ec of _0x3f4860)this[_0x3123('0x2c')](_0x5881ec);this[_0x3123('0x13')](_0x3f4860,_0x3123('0x1'),(_0x16d712,_0x546826)=>{this[_0x3123('0x13')](_0x546826,_0x3123('0x2a'),()=>{this[_0x3123('0x2c')](_0x546826);});}),this[_0x3123('0x13')](_0x3f4860,_0x3123('0x14'),(_0x5abde6,_0x208097)=>{_0x208097[_0x3123('0x9')][_0x3123('0x17')]('EditorAnnotations')&&this['_destroyEditorAnnotationsIntegration'](_0x208097[_0x3123('0x9')]['get'](_0x3123('0x30')));}),window[_0x3123('0x5')](_0x3123('0xa'),this[_0x3123('0x3')]),this['_annotations'][_0x3123('0x16')]();}[_0x3123('0x1d')](){if(!this['isAttached'])throw new _0x7fcb2c(_0x3123('0x20'),this);this[_0x3123('0x2d')](null);const _0x5061db=this[_0x3123('0x11')][_0x3123('0x9')]['get'](_0x6f2571);_0x5061db[_0x3123('0xd')](this[_0x3123('0x26')]),this[_0x3123('0x25')](_0x5061db),this[_0x3123('0x25')](this[_0x3123('0x26')]),this[_0x3123('0x25')](this['context'][_0x3123('0x15')]);for(const _0x11105f of Array['from'](this[_0x3123('0x28')]))this[_0x3123('0x27')](_0x11105f);window[_0x3123('0x23')](_0x3123('0xa'),this['_throttledPositioningRefresh']),this[_0x3123('0x3')]['cancel'](),this['activeAnnotation']=null,this[_0x3123('0x29')]=!0x1;}['destroy'](){this['isAttached']&&this[_0x3123('0x1d')]();}[_0x3123('0x2c')](_0x238c68){const _0xc1eb75=_0x238c68[_0x3123('0x9')][_0x3123('0x1b')](_0x3123('0x30'));if(!_0xc1eb75)return;const _0x5affe6=()=>{const _0x118e7c=_0xc1eb75[_0x3123('0x1a')]({'annotations':this[_0x3123('0x26')],'activeAnnotation':this[_0x3123('0x21')]});this[_0x3123('0x2d')](_0x118e7c[0x0]||null);};this[_0x3123('0x13')](_0xc1eb75,_0x3123('0x24'),_0x5affe6),this[_0x3123('0x13')](_0xc1eb75,_0x3123('0x18'),(_0x45576e,{isAnnotationTracked:_0x14f3c1})=>{this[_0x3123('0x21')]&&_0x14f3c1(this[_0x3123('0x21')])&&this['setActiveAnnotation'](null);}),this[_0x3123('0x13')](_0xc1eb75,_0x3123('0x12'),()=>{this[_0x3123('0x26')]['refreshPositioning']();}),this[_0x3123('0x13')](this[_0x3123('0x26')],'blur',_0x12a7c5=>{_0xc1eb75[_0x3123('0x0')]()&&(_0x5affe6(),_0x12a7c5[_0x3123('0x10')]());},{'priority':_0x3123('0x6')}),this['_editorAnnotations'][_0x3123('0x1')](_0xc1eb75);}[_0x3123('0x27')](_0x3d355d){_0x3d355d&&(this[_0x3123('0x25')](_0x3d355d),this[_0x3123('0x28')]['remove'](_0x3d355d));}}