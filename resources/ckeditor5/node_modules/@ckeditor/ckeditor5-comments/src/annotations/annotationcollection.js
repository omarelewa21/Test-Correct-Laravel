/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x179d=['stopListening','length','delete','getByInnerView','focusableElements','change:isFocused','isFocused','from','getByView','annotationcollection-not-existing-item','innerView','view','get','focusTracker','_items','_getOrderInContent','annotationcollection-duplicated-item','remove','clear','listenTo','_innerViewToAnnotation','has','refreshPositioning','set','add','fire','left','sort','targetRect','top','getIndex','_viewToAnnotation','updateTargetRect','focus','_focusTracker'];(function(_0x33e300,_0x179ddd){const _0x3ecfa2=function(_0x5ba055){while(--_0x5ba055){_0x33e300['push'](_0x33e300['shift']());}};_0x3ecfa2(++_0x179ddd);}(_0x179d,0x13e));const _0x3ecf=function(_0x33e300,_0x179ddd){_0x33e300=_0x33e300-0x0;let _0x3ecfa2=_0x179d[_0x33e300];return _0x3ecfa2;};import{CKEditorError as _0x36332e,Collection as _0x214faf,FocusTracker as _0x1b3679}from'ckeditor5/src/utils';export default class x extends _0x214faf{constructor(_0x286a02=[]){super(),this[_0x3ecf('0x11')]=new Map(),this[_0x3ecf('0x1c')]=new Map(),this[_0x3ecf('0x1f')]=new _0x1b3679(),this[_0x3ecf('0x1f')]['on'](_0x3ecf('0x2'),(_0x36c84a,_0x7a54a,_0x13eed5)=>{_0x13eed5||this['fire']('blur');});for(const _0x29ec6f of _0x286a02)this['add'](_0x29ec6f);}get[_0x3ecf('0x3')](){return this[_0x3ecf('0x1f')][_0x3ecf('0x3')];}[_0x3ecf('0x15')](_0x318c4d){if(this[_0x3ecf('0x12')](_0x318c4d))throw new _0x36332e(_0x3ecf('0xd'),null);this[_0x3ecf('0x11')]['set'](_0x318c4d[_0x3ecf('0x7')],_0x318c4d),this[_0x3ecf('0x1c')][_0x3ecf('0x14')](_0x318c4d[_0x3ecf('0x8')],_0x318c4d);for(const _0x153b4b of _0x318c4d[_0x3ecf('0x1')])this['_focusTracker']['add'](_0x153b4b);this[_0x3ecf('0x10')](_0x318c4d[_0x3ecf('0x1')],'add',(_0x12af1c,_0x532e83)=>{this[_0x3ecf('0x1f')][_0x3ecf('0x15')](_0x532e83);}),this[_0x3ecf('0x10')](_0x318c4d[_0x3ecf('0x1')],_0x3ecf('0xe'),(_0x33a585,_0xc7274a)=>{this['_focusTracker'][_0x3ecf('0xe')](_0xc7274a);}),this[_0x3ecf('0x10')](_0x318c4d[_0x3ecf('0x8')]['focusTracker'],_0x3ecf('0x2'),(_0x1707a3,_0x41c5cf,_0x4f40f8)=>{_0x4f40f8&&this[_0x3ecf('0x16')](_0x3ecf('0x1e'),_0x318c4d);});const _0x1d97f5=this[_0x3ecf('0xc')](_0x318c4d);super['add'](_0x318c4d,_0x1d97f5),_0x318c4d[_0x3ecf('0x1d')]();}[_0x3ecf('0xe')](_0x13e9c7){if(!this[_0x3ecf('0x12')](_0x13e9c7))throw new _0x36332e(_0x3ecf('0x6'),null);this[_0x3ecf('0x20')](_0x13e9c7[_0x3ecf('0x8')][_0x3ecf('0xa')]),this[_0x3ecf('0x20')](_0x13e9c7[_0x3ecf('0x1')]);for(const _0x1a95ad of _0x13e9c7['focusableElements'])this['_focusTracker'][_0x3ecf('0xe')](_0x1a95ad);this[_0x3ecf('0x1c')][_0x3ecf('0x22')](_0x13e9c7[_0x3ecf('0x8')]),this['_innerViewToAnnotation'][_0x3ecf('0x22')](_0x13e9c7[_0x3ecf('0x7')]),super[_0x3ecf('0xe')](_0x13e9c7);}[_0x3ecf('0x0')](_0x11f7b6){return this['_innerViewToAnnotation'][_0x3ecf('0x9')](_0x11f7b6);}[_0x3ecf('0x5')](_0x968906){return this['_viewToAnnotation']['get'](_0x968906);}['destroy'](){super[_0x3ecf('0xf')](),this[_0x3ecf('0x20')](),this[_0x3ecf('0x11')][_0x3ecf('0xf')](),this[_0x3ecf('0x1c')][_0x3ecf('0xf')](),this[_0x3ecf('0x1f')]['destroy']();}[_0x3ecf('0x13')](){for(const _0x2af30b of this)_0x2af30b[_0x3ecf('0x1d')]();this['_sort']();}['_sort'](){const _0x2dac65=Array[_0x3ecf('0x4')](this)[_0x3ecf('0x18')]((_0x4bc007,_0x8f89d8)=>y(_0x4bc007['targetRect'],_0x8f89d8[_0x3ecf('0x19')]));for(let _0x185c40=_0x2dac65[_0x3ecf('0x21')]-0x1;_0x185c40>0x0;_0x185c40--){const _0x1d2cc0=_0x2dac65[_0x185c40];_0x185c40!==this[_0x3ecf('0x1b')](_0x1d2cc0)&&(this[_0x3ecf('0xe')](_0x1d2cc0),this['add'](_0x1d2cc0,_0x185c40));}}[_0x3ecf('0xc')](_0x4f1d5e){let _0x56bbeb=0x0;const _0x2d0574=_0x4f1d5e[_0x3ecf('0x19')];if(!_0x2d0574)return this[_0x3ecf('0xb')][_0x3ecf('0x21')];for(const _0x2f7368 of this){const _0x16555b=_0x2f7368[_0x3ecf('0x19')];if(_0x16555b){if(y(_0x2d0574,_0x16555b)<0x0)return _0x56bbeb;_0x56bbeb++;}}return _0x56bbeb;}}export function bindAnnotationCollections({source:_0x890f07,target:_0x25349b,filter:_0x389ef3}){for(const _0x2be3cb of _0x890f07)_0x389ef3(_0x2be3cb)&&_0x25349b[_0x3ecf('0x15')](_0x2be3cb);_0x25349b[_0x3ecf('0x10')](_0x890f07,_0x3ecf('0x15'),(_0xc089eb,_0x498a84)=>{_0x389ef3(_0x498a84)&&_0x25349b['add'](_0x498a84);}),_0x25349b[_0x3ecf('0x10')](_0x890f07,'remove',(_0x1da88e,_0x34f992)=>{_0x25349b['has'](_0x34f992)&&_0x25349b[_0x3ecf('0xe')](_0x34f992);});}function y(_0x5508b3,_0x3353c5){if(null===_0x5508b3&&null===_0x3353c5)return 0x0;if(null===_0x5508b3)return-0x1;if(null===_0x3353c5)return 0x1;const _0x5e3bbe=_0x5508b3[_0x3ecf('0x1a')]-_0x3353c5[_0x3ecf('0x1a')];return 0x0==_0x5e3bbe?_0x5508b3[_0x3ecf('0x17')]-_0x3353c5[_0x3ecf('0x17')]:_0x5e3bbe;}