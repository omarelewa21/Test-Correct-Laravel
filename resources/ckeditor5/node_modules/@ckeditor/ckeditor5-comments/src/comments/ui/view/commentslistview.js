/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x3f19=['destroy','refreshVisibleViews','hasDirtyComment','_rearrangeExpand','_updateHasDirtyComment','ck-thread__comments','remove','insert','_model','visibleViews','createCollection','delegate','from','element','isEditMode','commentViews','comments','count','CommentView','editorConfig','_config','_collapsedCommentsView','set','isActive','_shouldCollapse','some','maxCommentsWhenCollapsed','formatDateTime','expand','commentUpdated','_handleNewCommentModel','weight','maxCommentCharsWhenCollapsed','listenTo','_rearrangeCollapse','_handleRemoveCommentModel','equal','viewUid','length','focus','add','delete','render','updateComment'];(function(_0x29a391,_0x3f19d3){const _0x114998=function(_0x2e327a){while(--_0x2e327a){_0x29a391['push'](_0x29a391['shift']());}};_0x114998(++_0x3f19d3);}(_0x3f19,0x113));const _0x1149=function(_0x29a391,_0x3f19d3){_0x29a391=_0x29a391-0x0;let _0x114998=_0x3f19[_0x29a391];return _0x114998;};import{View as _0x1d559b}from'ckeditor5/src/ui';import{diff as _0x485b0a,Collection as _0x531cb6}from'ckeditor5/src/utils';import _0x143800 from'./collapsedcommentsview';export default class Tt extends _0x1d559b{constructor(_0x283575,_0x1727a5,_0x5d9572){super(_0x283575),this[_0x1149('0xb')]('hasDirtyComment',!0x1),this[_0x1149('0xb')](_0x1149('0x1b'),_0x1727a5[_0x1149('0x5')][_0x1149('0x1b')]),this[_0x1149('0xb')](_0x1149('0xc'),!0x1),this['_model']=_0x1727a5,this['_config']=_0x5d9572,this['commentViews']=this[_0x1149('0x2b')](),this[_0x1149('0x2a')]=this['createCollection'](),this[_0x1149('0xa')]=new _0x143800(_0x283575),this['_collapsedCommentsView']['bind'](_0x1149('0x6'))['to'](this,_0x1149('0x1b'),_0x3aec51=>_0x3aec51-this[_0x1149('0x9')][_0x1149('0xf')]);for(const _0x4796ba of _0x1727a5[_0x1149('0x5')])this[_0x1149('0x13')](_0x4796ba);this[_0x1149('0x16')](_0x1727a5[_0x1149('0x5')],_0x1149('0x1d'),(_0x2eb5b6,_0x30933f)=>{this[_0x1149('0x1b')]++,this[_0x1149('0x13')](_0x30933f),this[_0x1149('0x22')]();}),this[_0x1149('0x16')](_0x1727a5[_0x1149('0x5')],_0x1149('0x27'),(_0x39c2dc,_0x30c6ae)=>{this[_0x1149('0x1b')]--,this[_0x1149('0x18')](_0x30c6ae),this[_0x1149('0x22')]();}),this[_0x1149('0x16')](_0x1727a5,_0x1149('0x12'),()=>this['refreshVisibleViews']()),this['on']('change:isActive',()=>this[_0x1149('0x22')]()),this['on']('change:hasDirtyComment',()=>this[_0x1149('0x22')]()),this['setTemplate']({'tag':'ul','attributes':{'class':[_0x1149('0x26')]},'children':this[_0x1149('0x2a')]});}get[_0x1149('0xd')](){return this[_0x1149('0x29')][_0x1149('0x14')]>this[_0x1149('0x9')]['maxThreadTotalWeight']&&!this[_0x1149('0xc')]&&!this[_0x1149('0x23')];}[_0x1149('0x1f')](){super[_0x1149('0x1f')](),this[_0x1149('0x22')]();}[_0x1149('0x1c')](){this[_0x1149('0x2')][_0x1149('0x1c')]();}[_0x1149('0x21')](){this['_collapsedCommentsView'][_0x1149('0x21')]();for(const _0x7390fb of this[_0x1149('0x4')])_0x7390fb['destroy']();super[_0x1149('0x21')]();}[_0x1149('0x22')](){this[_0x1149('0xd')]?this[_0x1149('0x17')]():this['_rearrangeExpand']();}[_0x1149('0x13')](_0x37f6e4){const _0x2d8254=new this[(_0x1149('0x9'))][(_0x1149('0x7'))](this['locale'],_0x37f6e4,{'maxCommentCharsWhenCollapsed':this[_0x1149('0x9')][_0x1149('0x15')],'formatDateTime':this[_0x1149('0x9')][_0x1149('0x10')],'editorConfig':this[_0x1149('0x9')][_0x1149('0x8')]});_0x2d8254[_0x1149('0x1a')]=_0x37f6e4['id'],_0x2d8254[_0x1149('0x0')]('removeComment')['to'](this),_0x2d8254[_0x1149('0x0')](_0x1149('0x20'))['to'](this),this[_0x1149('0x16')](_0x2d8254,'change:isEditMode',()=>this[_0x1149('0x25')]()),this['commentViews'][_0x1149('0x1d')](_0x2d8254);}[_0x1149('0x18')](_0x25d2df){const _0x2ca23c=this[_0x1149('0x4')][_0x1149('0x27')](_0x25d2df['id']);this['stopListening'](_0x2ca23c),_0x2ca23c[_0x1149('0x3')]&&this[_0x1149('0x25')](),_0x2ca23c[_0x1149('0x21')]();}[_0x1149('0x25')](){this[_0x1149('0x23')]=Array[_0x1149('0x1')](this[_0x1149('0x4')])[_0x1149('0xe')](_0x4c7fab=>_0x4c7fab['isEditMode']);}[_0x1149('0x17')](){const _0x2dfcbc=function(_0x5a2975){const _0x1e14aa=new _0x531cb6();for(const _0x3a6b9a of _0x5a2975)_0x1e14aa[_0x1149('0x1d')](_0x3a6b9a);return _0x1e14aa;}(this[_0x1149('0x4')]),_0x5b6c6f=this[_0x1149('0xa')][_0x1149('0x6')];for(let _0x405df7=0x1;_0x405df7<=_0x5b6c6f;_0x405df7++)_0x2dfcbc[_0x1149('0x27')](0x1);for(const _0x482ed5 of _0x2dfcbc)_0x482ed5['collapse']();_0x5b6c6f>0x0&&_0x2dfcbc['add'](this[_0x1149('0xa')],0x1),Ut(_0x485b0a(Array['from'](this[_0x1149('0x2a')]),Array[_0x1149('0x1')](_0x2dfcbc)),this[_0x1149('0x2a')],_0x2dfcbc);}[_0x1149('0x24')](){Ut(_0x485b0a(Array[_0x1149('0x1')](this[_0x1149('0x2a')]),Array[_0x1149('0x1')](this['commentViews'])),this[_0x1149('0x2a')],this[_0x1149('0x4')]);for(const _0x41d41b of this[_0x1149('0x2a')])_0x41d41b[_0x1149('0x11')]();}}function Ut(_0x3923f1,_0x2ef5cc,_0xcf1225){let _0x346e05=0x0;for(const _0x4372c1 of _0x3923f1)switch(_0x4372c1){case _0x1149('0x28'):_0x2ef5cc[_0x1149('0x1d')](_0xcf1225['get'](_0x346e05),_0x346e05),_0x346e05++;break;case _0x1149('0x1e'):_0x2ef5cc[_0x1149('0x27')](_0x346e05);break;case _0x1149('0x19'):_0x346e05++;}}